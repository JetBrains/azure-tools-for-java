dependencies {
    compile rootProject
    compile "org.java-websocket:Java-WebSocket:$web_socket_version"
    compile "com.squareup.retrofit2:converter-gson:$retrofit_version"

    implementation "com.cronutils:cron-utils:$cron_utils_version"
}

if (!ext.has("BuildNumber"))
    ext.BuildNumber = buildNumber

version "$BuildNumber"
logger.lifecycle("version=$version")
println "##teamcity[buildNumber '$version']"

def extensionsFrom = 'resources/dotnet'

intellij {
    pluginName = 'azure-toolkit-for-rider'
    version = rider_version
    plugins = ['terminal', 'restClient', 'yaml', dep_plugins_rider]

    downloadSources = Boolean.valueOf(sources)
}

tasks.withType(prepareSandbox.class) {
    from(extensionsFrom, { into "$intellij.pluginName/dotnet" })
}

buildSearchableOptions.onlyIf { false }

patchPluginXml {
    sinceBuild = patchPluginXmlSinceBuild
}

test {
    useTestNG()
}
